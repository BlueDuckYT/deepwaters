# Gradle


# Build your Java project and run tests with Gradle using a Gradle wrapper script.
# Add steps that analyze code, save build artifacts, deploy, and more:
# https://docs.microsoft.com/azure/devops/pipelines/languages/java

trigger:
- master

pool:
  vmImage: 'ubuntu-latest'

steps:
- task: Gradle@2
  inputs:
    workingDirectory: ''
    gradleWrapperFile: 'gradlew'
    gradleOptions: '-Xmx3072m'
    javaHomeOption: 'JDKVersion'
    jdkVersionOption: '1.8'
    jdkArchitectureOption: 'x64'
    publishJUnitResults: true
    testResultsFiles: '**/TEST-*.xml'
    tasks: 'build'
- task: PublishPipelineArtifact@1
  inputs:
    targetPath: '$(Pipeline.Workspace)/s/build/libs/'
    publishLocation: 'pipeline'

- task: ado-discord-webhook@1
  inputs:
    channelId: '696827985453514783'
    webhookKey: '696828133533548544/c2THSHw1v4x9Pmculi-WMIy6NEwxqkc28OcSanA83o7C6esOGVEkk7NHn9S2I8bAn133'
    messageType: 'embeds'
    embeds: '{
  "embed": {
    "title": "Download the build here!",
    "description": "New code has been pushed, check out the newest build!\n\n**Build ID: ${Build.BuildId}**\n\n**Commit ID: ${Build.SourceVersion}**",
    "url": "${Build.BuildUri}/&view=artifacts&type=publishedArtifacts",
    "color": 14361601,

    "footer": {
      "icon_url": "https://i.ibb.co/nCJ7RW6/wiggler-circle.png",
      "text": "The Deep Waters Project"
    }
  }
}'